Đề bài
LEVEL 2: triển khai deployment một ứng dụng web tĩnh lên kubernetes cho phép truy cập từ bên ngoài thông qua nodePort

output:

+ đóng gói thành công container chứa web tĩnh
+ download 1 template tại https://www.free-css.com/free-css-templates)
+ sử dụng base image nginx
+ lưu ý cấu hình nginx trỏ tới web tĩnh (tham khảo file cấu hình mẫu đơn giản tại https://gist.github.com/mockra/9062657)
+ 1 deployment chạy ứng dụng web tĩnh (replicas=2)
+ 1 nodePort service trỏ tới deployment (service web 1)
+ thực hiên curl tới nodePort và cho ra kết quả trang web tĩnh theo template

Bài làm

1. Download 1 static web: chính là folder mobile-app-html-template ở repo này
2. Tạo file nginx.conf
3. Tạo Dockerfile
4. Build docker image: docker build -t toannvbss/static-web:1.1.1.5 .
5. Kiểm tra image vừa tạo ra: docker images | grep static
-> kết quả: 
toannvbss/static-web          1.1.5     d69f21665656   7 minutes ago    188MB
toannvbss/static-web          1.1.3     84c6d96a4897   18 minutes ago   188MB
static-web                    1.1.2     abf608b779c8   26 minutes ago   188MB
6. Push lên docker hub: 
+ docker login
+ docker push toannvbss/static-web:1.1.1.5
-> Kiểm tra lại repo trên docker hub
7. Tạo thư mục templates chứa 2 file: static-web-deployment.yaml và static-web-service.yaml
8. Tạo deployments: k apply -f static-web-deployment.yaml
9. Kiểm tra lại deployment vừa tạo ra: k get deployments
-> kết quả:
NAME                    READY   UP-TO-DATE   AVAILABLE   AGE
static-web-deployment   2/2     2            2           11m
10. Tạo service: k apply -f static-web-service.yaml
11. Kiểm tra lại service vừa tạo: k get services
NAME                 TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)        AGE
static-web-service   NodePort    10.104.30.87    <none>        80:30005/TCP   11m
12. Kiểm tra lại 2 pod mới tạo: k get pod
-> kết quả:
NAME                                     READY   STATUS    RESTARTS   AGE
static-web-deployment-6b67b85df8-8xnn9   1/1     Running   0          12m
static-web-deployment-6b67b85df8-blpm6   1/1     Running   0          12m
13. Kiểm tra lại bằng lệnh: curl $(minikube ip -p star):30005
-> kết quả:
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>FitApp - Mobile App HTML Template</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">
....

hoặc truy cập vào địa chỉ: http://192.168.49.2:30005/ (trong đó 192.168.49.2 là địa chỉ ip của minikube)

